import{u as I,aE as Z,r as l,a1 as F,bi as O,bj as B,bk as j,j as e,C as v,D as N,bn as U,U as y,a as k,B as P,bo as m,bl as S,E as x,ah as Y,aj as _,ac as K,ai as V,J as W,$ as q,bm as G,a2 as h}from"./index-xSfxuKuS.js";function Q(){const o=I(),u=Z(),[p,M]=l.useState(null),[g,b]=l.useState(!1),[$,w]=l.useState(!1),[n,R]=l.useState(!1),[i,C]=l.useState(!1),z=F(),{register:A,handleSubmit:L,formState:{errors:f},watch:T}=O({resolver:B(j.object({password:j.string().min(8,"Password must be at least 8 characters").max(16,"Password can be at most 16 characters").regex(/[A-Z]/,"Must include at least one uppercase letter").regex(/[a-z]/,"Must include at least one lowercase letter").regex(/\d/,"Must include at least one number").regex(/[^A-Za-z0-9]/,"Must include at least one special character")}))}),r=T("password");l.useEffect(()=>{const s=new URLSearchParams(u.search).get("token");s?M(s):w(!0)},[u.search]);const E=async t=>{var s,d;if(!p){h.error("Invalid or missing reset token.");return}try{b(!0),await z.post("/auth/reset-password",{token:p,newPassword:t.password}),C(!0),h.success("âœ… Password reset successful! Redirecting to login..."),setTimeout(()=>{o("/login")},3e3)}catch(D){const c=((d=(s=D.response)==null?void 0:s.data)==null?void 0:d.message)||"Something went wrong. Try again.";(c.includes("expired")||c.includes("Invalid"))&&w(!0),h.error(c)}finally{b(!1)}},a=(t=>{if(!t)return{strength:0,label:"",color:""};let s=0;return t.length>=8&&s++,/[A-Z]/.test(t)&&s++,/[a-z]/.test(t)&&s++,/\d/.test(t)&&s++,/[^A-Za-z0-9]/.test(t)&&s++,[{strength:0,label:"Very Weak",color:"text-red-400"},{strength:1,label:"Weak",color:"text-orange-400"},{strength:2,label:"Fair",color:"text-yellow-400"},{strength:3,label:"Good",color:"text-blue-400"},{strength:4,label:"Strong",color:"text-green-400"},{strength:5,label:"Very Strong",color:"text-emerald-400"}][s]})(r);return $?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((t,s)=>e.jsx("div",{className:"absolute rounded-full bg-gradient-to-br from-red-400/20 to-orange-400/20 animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${15+Math.random()*25}px`,height:`${15+Math.random()*25}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${4+Math.random()*2}s`}},s))}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(v,{className:"backdrop-blur-xl bg-white/5 border border-white/20 shadow-2xl rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/5 to-orange-500/5"}),e.jsxs(N,{className:"relative z-10 text-center p-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-full p-3 shadow-lg",children:e.jsx(U,{className:"w-8 h-8 text-white"})})}),e.jsx(y,{className:"text-2xl font-bold text-white mb-2",children:"Link Expired"}),e.jsx("p",{className:"text-red-200 opacity-90 text-sm",children:"This reset link is invalid or has expired"})]}),e.jsx(k,{className:"relative z-10 p-8 pt-0",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-2xl p-6 backdrop-blur-sm",children:e.jsx("p",{className:"text-red-200 text-sm",children:"The mystical portal has closed. Request a new password reset to access your dream realm again."})}),e.jsxs(P,{onClick:()=>o("/forgot-password"),className:"w-full h-12 bg-gradient-to-r from-red-600 via-orange-600 to-yellow-600 hover:from-red-500 hover:via-orange-500 hover:to-yellow-500 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-xl shadow-lg",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Request New Reset Link"]}),e.jsxs("button",{onClick:()=>o("/login"),className:"flex items-center justify-center w-full text-purple-300 hover:text-white transition-colors duration-200 text-sm",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Back to Login"]})]})})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[[...Array(8)].map((t,s)=>e.jsx("div",{className:"absolute rounded-full bg-gradient-to-br from-purple-400/20 to-pink-400/20 animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${15+Math.random()*25}px`,height:`${15+Math.random()*25}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${4+Math.random()*2}s`}},s)),e.jsx("div",{className:"absolute top-20 right-20 opacity-20",children:e.jsx("div",{className:"relative",children:[...Array(4)].map((t,s)=>e.jsx(x,{className:"absolute w-2 h-2 text-cyan-300 animate-twinkle",style:{left:`${Math.cos(s*Math.PI/2)*30}px`,top:`${Math.sin(s*Math.PI/2)*30}px`,animationDelay:`${s*.3}s`}},s))})})]}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:()=>o("/login"),className:"flex items-center text-purple-300 hover:text-white transition-colors duration-200 mb-8 group",children:[e.jsx(S,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform duration-200"}),"Back to Login"]}),e.jsxs(v,{className:"backdrop-blur-xl bg-white/5 border border-white/20 shadow-2xl rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-cyan-500/5"}),e.jsxs(N,{className:"relative z-10 text-center p-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-full p-3 shadow-lg",children:e.jsx(m,{className:"w-8 h-8 text-white"})})}),e.jsx(y,{className:"text-2xl font-bold text-white mb-2",children:i?"Password Restored":"Forge New Key"}),e.jsx("p",{className:"text-purple-200 opacity-90 text-sm",children:i?"Your access to the dream realm has been restored":"Create a new sacred password to protect your dreams"})]}),e.jsx(k,{className:"relative z-10 p-8 pt-0",children:i?e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"bg-green-500/20 border border-green-400/30 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsx(G,{className:"w-12 h-12 text-green-400 mx-auto mb-4 animate-pulse"}),e.jsx("h3",{className:"text-lg font-semibold text-green-300 mb-2",children:"Password Successfully Reset!"}),e.jsx("p",{className:"text-green-200 text-sm",children:"Your mystical key has been forged. You'll be redirected to the login portal shortly."})]}),e.jsx("div",{className:"bg-white/5 border border-white/20 rounded-xl p-4",children:e.jsx("p",{className:"text-purple-200 text-sm opacity-80",children:"Redirecting to login in 3 seconds..."})})]}):e.jsxs("form",{onSubmit:L(E),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{className:"text-purple-200 font-medium flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2 text-purple-400"}),"New Sacred Password"]}),e.jsxs("div",{className:"relative group",children:[e.jsx(K,{...A("password"),type:n?"text":"password",placeholder:"Create your mystical key...",className:"bg-white/10 backdrop-blur-sm text-white border border-white/30 focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 rounded-xl h-12 text-lg pr-12 transition-all duration-300 placeholder:text-purple-300/60 group-hover:bg-white/15"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-purple-300 hover:text-white transition-colors duration-200",onClick:()=>R(!n),children:n?e.jsx(V,{className:"w-5 h-5"}):e.jsx(W,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-purple-500/0 to-pink-500/0 group-focus-within:from-purple-500/10 group-focus-within:to-pink-500/10 transition-all duration-500 pointer-events-none"})]}),r&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-purple-300",children:"Strength:"}),e.jsx("span",{className:`text-xs font-medium ${a.color}`,children:a.label})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a.strength<=1?"bg-red-500":a.strength<=2?"bg-yellow-500":a.strength<=3?"bg-blue-500":a.strength<=4?"bg-green-500":"bg-emerald-500"}`,style:{width:`${a.strength/5*100}%`}})})]}),f.password&&e.jsxs("p",{className:"text-pink-400 text-sm animate-pulse flex items-center",children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),f.password.message]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/20 rounded-xl p-4 space-y-2",children:[e.jsxs("p",{className:"text-purple-200 text-sm font-medium flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Password Requirements"]}),e.jsx("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[{regex:/.{8,}/,text:"At least 8 characters"},{regex:/[A-Z]/,text:"One uppercase letter"},{regex:/[a-z]/,text:"One lowercase letter"},{regex:/\d/,text:"One number"},{regex:/[^A-Za-z0-9]/,text:"One special character"}].map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${r&&t.regex.test(r)?"bg-green-400":"bg-purple-400/40"}`}),e.jsx("span",{className:`${r&&t.regex.test(r)?"text-green-300":"text-purple-300/70"}`,children:t.text})]},s))})]}),e.jsx(P,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-purple-600 via-pink-600 to-cyan-600 hover:from-purple-500 hover:via-pink-500 hover:to-cyan-500 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-xl shadow-lg disabled:opacity-70 disabled:hover:scale-100",disabled:g,children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(q,{className:"w-5 h-5 animate-spin mr-2"}),e.jsx("span",{className:"animate-pulse",children:"Forging new key..."})]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Reset Password"]})})]})})]})]})}),e.jsx("style",{jsx:!0,children:`
        @keyframes twinkle {
          0%,
          100% {
            opacity: 0.2;
          }
          50% {
            opacity: 0.8;
          }
        }
        .animate-twinkle {
          animation: twinkle 3s ease-in-out infinite;
        }
      `})]})}export{Q as default};
