const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ShareModal-DQFjTKYj.js","assets/index-DiiwzJ83.js","assets/index-COv99PPM.css"])))=>i.map(i=>d[i]);
import{r as x,j as t,R as ne,z as b,aJ as ue,E as pe,_ as fe,a1 as ye,ba as be,t as re,a3 as ge,ad as ve,ae as je,bq as we,af as Ne,aw as ke,W as G,X as q,Y as F,Z as X,B as _e,av as Ce,b9 as Re,bb as Ee,bc as Pe,a5 as Se}from"./index-DiiwzJ83.js";import{S as De}from"./scroll-area-D5vN3zU8.js";import{B as te}from"./badge-oNWt7E9C.js";import{H as Ie}from"./HeartIcon-Blbr6dBh.js";import{d as Oe,D as Te}from"./DPTCard-DSyZBUQn.js";import{C as he,R as U}from"./MyDreamsPage-Bo4Xr5NO.js";import{O as Me}from"./OverlayLoader-cjtFKqxc.js";import"./DreamPersonalityTypes-BqBoWeLo.js";import"./hover-card-B3d82TDP.js";import"./info-Clro60_y.js";import"./index-CrQnQRua.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var J=function(e,r){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])},J(e,r)};function Ae(e,r){J(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Ve=100,We=100,ie=50,K=50,Z=50;function le(e){var r=e.className,n=e.counterClockwise,s=e.dashRatio,a=e.pathRadius,i=e.strokeWidth,o=e.style;return x.createElement("path",{className:r,style:Object.assign({},o,Be({pathRadius:a,dashRatio:s,counterClockwise:n})),d:Le({pathRadius:a,counterClockwise:n}),strokeWidth:i,fillOpacity:0})}function Le(e){var r=e.pathRadius,n=e.counterClockwise,s=r,a=n?1:0;return`
      M `+K+","+Z+`
      m 0,-`+s+`
      a `+s+","+s+" "+a+" 1 1 0,"+2*s+`
      a `+s+","+s+" "+a+" 1 1 0,-"+2*s+`
    `}function Be(e){var r=e.counterClockwise,n=e.dashRatio,s=e.pathRadius,a=Math.PI*2*s,i=(1-n)*a;return{strokeDasharray:a+"px "+a+"px",strokeDashoffset:(r?-i:i)+"px"}}var ze=function(e){Ae(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},r.prototype.getPathRadius=function(){return ie-this.props.strokeWidth/2-this.getBackgroundPadding()},r.prototype.getPathRatio=function(){var n=this.props,s=n.value,a=n.minValue,i=n.maxValue,o=Math.min(Math.max(s,a),i);return(o-a)/(i-a)},r.prototype.render=function(){var n=this.props,s=n.circleRatio,a=n.className,i=n.classes,o=n.counterClockwise,c=n.styles,u=n.strokeWidth,d=n.text,l=this.getPathRadius(),m=this.getPathRatio();return x.createElement("svg",{className:i.root+" "+a,style:c.root,viewBox:"0 0 "+Ve+" "+We,"data-test-id":"CircularProgressbar"},this.props.background?x.createElement("circle",{className:i.background,style:c.background,cx:K,cy:Z,r:ie}):null,x.createElement(le,{className:i.trail,counterClockwise:o,dashRatio:s,pathRadius:l,strokeWidth:u,style:c.trail}),x.createElement(le,{className:i.path,counterClockwise:o,dashRatio:m*s,pathRadius:l,strokeWidth:u,style:c.path}),d?x.createElement("text",{className:i.text,style:c.text,x:K,y:Z},d):null)},r.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},r}(x.Component);function He(e){var r=e.rotation,n=e.strokeLinecap,s=e.textColor,a=e.textSize,i=e.pathColor,o=e.pathTransition,c=e.pathTransitionDuration,u=e.trailColor,d=e.backgroundColor,l=r==null?void 0:"rotate("+r+"turn)",m=r==null?void 0:"center center";return{root:{},path:$({stroke:i,strokeLinecap:n,transform:l,transformOrigin:m,transition:o,transitionDuration:c==null?void 0:c+"s"}),trail:$({stroke:u,strokeLinecap:n,transform:l,transformOrigin:m}),text:$({fill:s,fontSize:a}),background:$({fill:d})}}function $(e){return Object.keys(e).forEach(function(r){e[r]==null&&delete e[r]}),e}const Ge=({sentiment:e})=>{const r=[{label:"Positive",emoji:"ðŸ˜Š",value:e.positive,color:"#00ffac"},{label:"Neutral",emoji:"ðŸ˜",value:e.neutral,color:"#ffffff"},{label:"Negative",emoji:"ðŸ˜¢",value:e.negative,color:"#ff5757"}];return t.jsxs("section",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:"ðŸ“Š Sentiment Breakdown"}),t.jsx("div",{className:"flex justify-center gap-6",children:r.map(n=>t.jsxs("div",{className:" h-32 flex flex-col items-center gap-1 bg-white/5 p-3 rounded-xl shadow-lg backdrop-blur",children:[t.jsx("div",{className:"w-16",children:t.jsx(ze,{value:n.value,text:`${n.value}%`,styles:He({pathColor:n.color,textColor:"#fff",trailColor:"rgba(255, 255, 255, 0.1)",textSize:"24px"})})}),t.jsxs("span",{className:"text-white text-sm",children:[n.emoji," ",n.label]})]},n.label))})]})};function Y(e,r,n,s){return new(n||(n=Promise))(function(a,i){function o(d){try{u(s.next(d))}catch(l){i(l)}}function c(d){try{u(s.throw(d))}catch(l){i(l)}}function u(d){var l;d.done?a(d.value):(l=d.value,l instanceof n?l:new n(function(m){m(l)})).then(o,c)}u((s=s.apply(e,[])).next())})}function O(e,r){var n,s,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(u){return function(d){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(a=2&l[0]?s.return:l[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,l[1])).done)return a;switch(s=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,s=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!((a=a.length>0&&a[a.length-1])||l[0]!==6&&l[0]!==2)){o=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(l[0]===6&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=r.call(e,o)}catch(m){l=[6,m],s=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,d])}}}function ee(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function k(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s,a,i=n.call(e),o=[];try{for(;(r===void 0||r-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function C(e,r,n){if(arguments.length===2)for(var s,a=0,i=r.length;a<i;a++)!s&&a in r||(s||(s=Array.prototype.slice.call(r,0,a)),s[a]=r[a]);return e.concat(s||Array.prototype.slice.call(r))}function oe(e,r,n,s,a){for(var i=[],o=5;o<arguments.length;o++)i[o-5]=arguments[o];return Y(this,void 0,void 0,function(){var c,u,d,l,m,p;return O(this,function(f){switch(f.label){case 0:f.trys.push([0,12,13,14]),c=ee(i),u=c.next(),f.label=1;case 1:if(u.done)return[3,11];switch(d=u.value,typeof d){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,qe(e,r,d,n,s,a)];case 3:return f.sent(),[3,10];case 4:return[4,me(d)];case 5:return f.sent(),[3,10];case 6:return[4,d.apply(void 0,C([e,r,n,s,a],k(i),!1))];case 7:return f.sent(),[3,10];case 8:return[4,d];case 9:f.sent(),f.label=10;case 10:return u=c.next(),[3,1];case 11:return[3,14];case 12:return l=f.sent(),m={error:l},[3,14];case 13:try{u&&!u.done&&(p=c.return)&&p.call(c)}finally{if(m)throw m.error}return[7];case 14:return[2]}})})}function qe(e,r,n,s,a,i){return Y(this,void 0,void 0,function(){var o,c;return O(this,function(u){switch(u.label){case 0:return o=e.textContent||"",c=function(d,l){var m=k(l).slice(0);return C(C([],k(d),!1),[NaN],!1).findIndex(function(p,f){return m[f]!==p})}(o,n),[4,Fe(e,C(C([],k($e(o,r,c)),!1),k(Xe(n,r,c)),!1),s,a,i)];case 1:return u.sent(),[2]}})})}function me(e){return Y(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:return[4,new Promise(function(n){return setTimeout(n,e)})];case 1:return r.sent(),[2]}})})}function Fe(e,r,n,s,a){return Y(this,void 0,void 0,function(){var i,o,c,u,d,l,m,p,f,S,T,R,D;return O(this,function(j){switch(j.label){case 0:if(i=r,a){for(o=0,c=1;c<r.length;c++)if(u=k([r[c-1],r[c]],2),d=u[0],(l=u[1]).length>d.length||l===""){o=c;break}i=r.slice(o,r.length)}j.label=1;case 1:j.trys.push([1,6,7,8]),m=ee(function(I){var E,_,y,P,L,V,M;return O(this,function(w){switch(w.label){case 0:E=function(A){return O(this,function(B){switch(B.label){case 0:return[4,{op:function(z){return requestAnimationFrame(function(){return z.textContent=A})},opCode:function(z){var Q=z.textContent||"";return A===""||Q.length>A.length?"DELETE":"WRITING"}}];case 1:return B.sent(),[2]}})},w.label=1;case 1:w.trys.push([1,6,7,8]),_=ee(I),y=_.next(),w.label=2;case 2:return y.done?[3,5]:(P=y.value,[5,E(P)]);case 3:w.sent(),w.label=4;case 4:return y=_.next(),[3,2];case 5:return[3,8];case 6:return L=w.sent(),V={error:L},[3,8];case 7:try{y&&!y.done&&(M=_.return)&&M.call(_)}finally{if(V)throw V.error}return[7];case 8:return[2]}})}(i)),p=m.next(),j.label=2;case 2:return p.done?[3,5]:(f=p.value,S=f.opCode(e)==="WRITING"?n+n*(Math.random()-.5):s+s*(Math.random()-.5),f.op(e),[4,me(S)]);case 3:j.sent(),j.label=4;case 4:return p=m.next(),[3,2];case 5:return[3,8];case 6:return T=j.sent(),R={error:T},[3,8];case 7:try{p&&!p.done&&(D=m.return)&&D.call(m)}finally{if(R)throw R.error}return[7];case 8:return[2]}})})}function Xe(e,r,n){var s,a;return n===void 0&&(n=0),O(this,function(i){switch(i.label){case 0:s=r(e),a=s.length,i.label=1;case 1:return n<a?[4,s.slice(0,++n).join("")]:[3,3];case 2:return i.sent(),[3,1];case 3:return[2]}})}function $e(e,r,n){var s,a;return n===void 0&&(n=0),O(this,function(i){switch(i.label){case 0:s=r(e),a=s.length,i.label=1;case 1:return a>n?[4,s.slice(0,--a).join("")]:[3,3];case 2:return i.sent(),[3,1];case 3:return[2]}})}var Ye="index-module_type__E-SaG";(function(e,r){r===void 0&&(r={});var n=r.insertAt;if(typeof document<"u"){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var Qe=x.memo(x.forwardRef(function(e,r){var n=e.sequence,s=e.repeat,a=e.className,i=e.speed,o=i===void 0?40:i,c=e.deletionSpeed,u=e.omitDeletionAnimation,d=u!==void 0&&u,l=e.preRenderFirstString,m=l!==void 0&&l,p=e.wrapper,f=p===void 0?"span":p,S=e.splitter,T=S===void 0?function(h){return C([],k(h),!1)}:S,R=e.cursor,D=R===void 0||R,j=e.style,I=function(h,g){var N={};for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&g.indexOf(v)<0&&(N[v]=h[v]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var W=0;for(v=Object.getOwnPropertySymbols(h);W<v.length;W++)g.indexOf(v[W])<0&&Object.prototype.propertyIsEnumerable.call(h,v[W])&&(N[v[W]]=h[v[W]])}return N}(e,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),E=I["aria-label"],_=I["aria-hidden"],y=I.role;c||(c=o);var P=new Array(2).fill(40);[o,c].forEach(function(h,g){switch(typeof h){case"number":P[g]=Math.abs(h-100);break;case"object":var N=h.type,v=h.value;if(typeof v!="number")break;N==="keyStrokeDelayInMs"&&(P[g]=v)}});var L,V,M,w,A,B,z=P[0],Q=P[1],H=function(h,g){g===void 0&&(g=null);var N=x.useRef(g);return x.useEffect(function(){h&&(typeof h=="function"?h(N.current):h.current=N.current)},[h]),N}(r),ae=Ye;L=a?"".concat(D?ae+" ":"").concat(a):D?ae:"",V=x.useRef(function(){var h,g=n;s===1/0?h=oe:typeof s=="number"&&(g=Array(1+s).fill(n).flat());var N=h?C(C([],k(g),!1),[h],!1):C([],k(g),!1);return oe.apply(void 0,C([H.current,T,z,Q,d],k(N),!1)),function(){H.current}}),M=x.useRef(),w=x.useRef(!1),A=x.useRef(!1),B=k(x.useState(0),2)[1],w.current&&(A.current=!0),x.useEffect(function(){return w.current||(M.current=V.current(),w.current=!0),B(function(h){return h+1}),function(){A.current&&M.current&&M.current()}},[]);var xe=f,se=m?n.find(function(h){return typeof h=="string"})||"":null;return ne.createElement(xe,{"aria-hidden":_,"aria-label":E,role:y,style:j,className:L,children:E?ne.createElement("span",{"aria-hidden":"true",ref:H,children:se}):se,ref:E?void 0:H})}),function(e,r){return!0});const ce={calm:"bg-blue-500/40",quiet:"bg-blue-300/30",eerie:"bg-purple-500/30",joyful:"bg-yellow-400/40",dreamy:"bg-pink-500/30",intense:"bg-red-500/40",default:"bg-pink-400/40"},de={calm:"ðŸ•Šï¸",quiet:"ðŸ¤«",eerie:"ðŸŒ«ï¸",joyful:"â˜€ï¸",dreamy:"ðŸŒ™",intense:"ðŸ”¥",default:"âœ¨"},Ue={backgroundImage:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"},Je=({vibe:e})=>{var r,n,s;return!e||!e.tone&&!((r=e.keywords)!=null&&r.length)?null:t.jsxs("section",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"ðŸŽ¼ Vibe & Tone"}),t.jsxs("div",{className:"bg-white/10 p-4 rounded-2xl backdrop-blur shadow-inner",children:[((n=e.keywords)==null?void 0:n.length)>0&&t.jsx("div",{className:"text-white mb-3",children:t.jsx(Qe,{sequence:e.keywords.flatMap(a=>[a,3e3]),speed:20,deletionSpeed:20,repeat:1/0,className:"text-md font-medium tracking-wide"})}),((s=e.keywords)==null?void 0:s.length)>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.keywords.map(a=>{const i=a.toLowerCase(),o=ce[i]||ce.default,c=de[i]||de.default;return t.jsx(b.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:200},children:t.jsxs(te,{className:`text-white text-xs rounded-full px-3 py-1 ${o} backdrop-blur-md font-medium shimmer-badge`,style:Ue,children:[c," ",a]})},a)})}),e.tone&&t.jsxs(b.p,{initial:{opacity:0,y:5},whileInView:{opacity:1,y:0},transition:{delay:.2},className:"text-sm italic text-pink-200 font-serif mt-4",children:["â€œ",e.tone,"â€"]})]}),t.jsx("style",{children:`
        @keyframes shimmer {
          0% {
            background-position: -200% 0;
          }
          100% {
            background-position: 200% 0;
          }
        }
      `})]})},Ke="";function Ze({quote:e}){return e?t.jsxs("div",{className:"relative w-full mt-6 mb-10",children:[t.jsx(ue,{animationData:Ke,loop:!0,className:"absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none"}),t.jsx(b.div,{className:"relative z-10 mx-auto max-w-3xl bg-white/10 text-white p-6 rounded-3xl shadow-2xl backdrop-blur-xl border border-white/20",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},children:t.jsxs("blockquote",{className:"text-lg italic font-light leading-relaxed text-center",children:["â€œ",e,"â€"]})})]}):null}const et={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:e*.1}})},tt=({dream:e})=>{const{symbols:r=[],themes:n=[],characters:s=[],setting:a=[],notes_to_ai:i,real_life_link:o}=e,c=r.length||n.length||s.length||a.length||i||o,u=x.useMemo(()=>[{label:"Symbols",icon:t.jsx(pe,{className:"text-yellow-300"}),data:r},{label:"Themes",icon:t.jsx("span",{className:"text-pink-400",children:"ðŸŽ­"}),data:n},{label:"Characters",icon:t.jsx("span",{className:"text-indigo-400",children:"ðŸ§‘â€ðŸ¤â€ðŸ§‘"}),data:s},{label:"Setting",icon:t.jsx("span",{className:"text-green-400",children:"ðŸŒ„"}),data:a}],[r,n,s,a]);return c?t.jsxs("div",{className:"relative mt-6 bg-white/5 rounded-2xl p-6 border border-white/10",children:[t.jsx(ue,{animationData:Oe,loop:!0,autoplay:!0,className:"absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none z-0"}),t.jsx(b.h2,{className:"text-2xl font-bold mb-4 relative z-10",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:"ðŸ§© Dream Metadata"}),t.jsxs("div",{className:"space-y-4 relative z-10",children:[t.jsx(fe,{children:u.map((d,l)=>d.data.length?t.jsxs(b.div,{className:"",variants:et,initial:"hidden",animate:"visible",custom:l,children:[t.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 mb-2",children:[d.icon," ",d.label]}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:d.data.map((m,p)=>t.jsx(b.div,{whileHover:{scale:1.05},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:p*.03},children:t.jsx(te,{className:"bg-white/10 text-white backdrop-blur-md",children:m})},p))})]},d.label):null)}),i&&t.jsxs(b.div,{className:"mt-4 bg-black/20 p-4 rounded-lg flex gap-3 items-start",initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:[t.jsx(he,{className:"text-yellow-300 mt-1"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:"Note to AI"}),t.jsx("p",{className:"text-sm text-white/90",children:i})]})]}),o&&t.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},className:"bg-white/10 p-4 rounded-xl mt-6",children:[t.jsx("h3",{className:"text-md font-semibold text-white mb-1",children:"ðŸ§  Real-Life Context"}),t.jsx("p",{className:"text-sm text-gray-200",children:o})]})]})]}):null},at=x.lazy(()=>Se(()=>import("./ShareModal-DQFjTKYj.js"),__vite__mapDeps([0,1,2])));function xt({dream:e,setOpenOverlay:r,updateDream:n,onRetryImage:s,isRetryingImage:a,handleLike:i,liked:o}){var f,S,T,R,D,j,I,E,_;ye();const[c,u]=x.useState(!1),d=b(be),l=[{title:"Symbol Meanings",icon:"ðŸ§ ",text:((f=e.analysis.deep_analysis)==null?void 0:f.symbol_meanings)||"No symbol info available."},{title:"Emotion Journey",icon:"ðŸ’«",text:((S=e.analysis.deep_analysis)==null?void 0:S.emotion_journey)||"No emotional insight found."},{title:"Psychological Roots",icon:"ðŸªž",text:((T=e.analysis.deep_analysis)==null?void 0:T.possible_psychological_roots)||"No roots identified."},{title:"Mythical Archetypes",icon:"ðŸ§™â€â™‚ï¸",text:((R=e.analysis.deep_analysis)==null?void 0:R.mythical_archetypes)||"No archetypes found."},{title:"What You Might Learn",icon:"ðŸ§­",text:((D=e.analysis.deep_analysis)==null?void 0:D.what_you_might_learn)||"No lesson extracted."}],m={Neutral:"ðŸ˜",Terrified:"ðŸ˜­",Euphoric:"ðŸ¤©",Sad:"ðŸ˜”",Happy:"ðŸ˜Š"};x.useEffect(()=>{re("Engagement",{source:"Dream",event:"Viewed Analysis",dreamId:e._id})},[e._id]),x.useEffect(()=>{var y;re("Image Generation",{source:"Dream",event:(y=e.analysis)==null?void 0:y.image_status,dreamId:e._id})},[(j=e.analysis)==null?void 0:j.image_status,e._id]);const p=Math.min(Math.max(e.intensity,0),100);return t.jsx(ge,{open:!0,onOpenChange:()=>r(!1),children:t.jsxs(ve,{className:"max-w-5xl w-full bg-gradient-to-br from-[#2b2b3f] to-[#161621] text-white overflow-hidden p-0",children:[t.jsxs(De,{className:"max-h-[90vh] p-6",children:[t.jsxs(je,{className:"flex items-center justify-between mb-4",children:[t.jsx(we,{onClick:()=>r(!1),className:"cursor-pointer"}),t.jsxs("div",{className:"text-center",children:[t.jsx(Ne,{className:"text-3xl font-bold font-serif tracking-wide",children:e.title}),t.jsx("p",{className:"text-xs mt-1 text-muted-foreground",children:ke(new Date(e.date),"dd MMM yyyy")})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(G,{children:t.jsxs(q,{children:[t.jsx(F,{asChild:!0,children:t.jsx("div",{className:"h-8 w-8 flex justify-center items-center rounded-full bg-white/50 hover:bg-white/60",children:t.jsx(Ie,{liked:o,onClick:i})})}),t.jsx(X,{children:t.jsx("p",{children:o?"Unlike Dream":"Like Dream"})})]})}),parseFloat(e.analysis.analysis_version.slice(1))>=1.4&&e.analysis.image_status==="completed"&&t.jsx(G,{children:t.jsxs(q,{children:[t.jsx(F,{asChild:!0,children:t.jsx("button",{"aria-label":"Share dream",onClick:()=>u(!0),className:"h-8 w-8 flex justify-center items-center rounded-full bg-white/50 hover:bg-white/60",children:t.jsxs("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("circle",{cx:"18",cy:"5",r:"2.5"}),t.jsx("circle",{cx:"6",cy:"12",r:"2.5"}),t.jsx("circle",{cx:"18",cy:"19",r:"2.5"}),t.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),t.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]})})}),t.jsx(X,{children:t.jsx("p",{children:"Share Dream"})})]})})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs(b.div,{className:"rounded-lg shadow-xl bg-white/10 p-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[t.jsxs("div",{className:"rounded-xl overflow-hidden min-h-[250px] flex items-center justify-center bg-black/30 relative",children:[e.analysis.image_status==="processing"&&t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(U,{className:"animate-spin h-10 w-10 text-muted-foreground mx-auto"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating dream image..."})]}),e.analysis.image_status==="failed"&&t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx(he,{className:"h-10 w-10 text-red-500 mx-auto"}),t.jsx("p",{className:"text-sm text-destructive",children:"Image generation failed"}),e.analysis.image_is_retrying?t.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,repeat:1/0,repeatType:"reverse"},className:"flex items-center justify-center gap-2 text-yellow-500 text-sm",children:[t.jsx(U,{className:"h-4 w-4 animate-spin-slow"}),"Retrying in a few moments..."]}):t.jsx(G,{children:t.jsxs(q,{children:[t.jsx(F,{asChild:!0,children:t.jsxs(_e,{variant:"destructive",size:"sm",onClick:()=>s(e.analysis._id),disabled:a||e.analysis.image_retry_count>=3,className:"mx-auto",children:[t.jsx(U,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),e.analysis.image_retry_count>=3?"Max Retries":"Retry Now"]})}),t.jsx(X,{children:t.jsx("p",{children:e.analysis.image_retry_count>=3?"Retry limit reached":"Retry dream image generation"})})]})})]}),e.analysis.image_status==="completed"&&t.jsx("div",{className:"rounded-xl overflow-hidden border border-muted shadow-md",children:t.jsx(Ce,{src:e.analysis.image_url,alt:"Dream visualization",className:"w-full h-auto max-h-[400px] object-cover transition-all duration-300 hover:scale-[1.01]"})})]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2 italic",children:[t.jsx("strong",{children:"Prompt:"})," ",e.analysis.image_prompt]}),t.jsxs("div",{className:"mt-6 max-w-md mx-auto",children:[t.jsx(Ge,{sentiment:e.analysis.sentiment}),t.jsxs("div",{className:"mt-6 space-y-4",children:[t.jsx("h4",{className:"text-md font-semibold text-white flex items-center gap-2",children:"ðŸŽ­ Mood + Intensity"}),t.jsx(G,{children:t.jsxs(q,{children:[t.jsx(F,{asChild:!0,children:t.jsxs("div",{className:"inline-flex items-center space-x-2 cursor-default select-none rounded-full bg-muted px-3 py-1",children:[t.jsx("span",{className:"text-2xl",children:m[e.mood]||"â“"}),t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:e.mood||"Unknown"})]})}),t.jsx(X,{side:"top",children:t.jsx("p",{children:"The emotional tone of the dream"})})]})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-1 text-xs text-muted-foreground",children:[t.jsx("span",{children:"Intensity"}),t.jsxs("span",{children:[p,"%"]})]}),t.jsx("div",{className:"w-full h-3 rounded-full bg-muted overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full",style:{width:`${p}%`,background:"linear-gradient(90deg, #f43f5e, #fb7185, #f43f5e)",transition:"width 0.5s ease-in-out"}})})]})]})]}),t.jsx(tt,{dream:e})]}),t.jsxs(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-6",children:[t.jsxs("section",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"ðŸŒ™ Description"}),t.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:1.2,ease:"easeOut"},className:"relative p-5 rounded-3xl bg-white/10 backdrop-blur-lg shadow-[0_0_30px_rgba(255,255,255,0.05)] border border-white/20 text-sm text-gray-200 max-w-2xl",children:[t.jsx("p",{children:e.description}),t.jsx("div",{className:"absolute right-6 -bottom-3 w-4 h-4 rotate-45 bg-white/10 border-l border-b border-white/20 backdrop-blur-lg"})]})]}),t.jsxs("section",{className:"mt-8",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"ðŸ’¬ Short Interpretation"}),t.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:1.2,ease:"easeOut"},className:"relative p-5 rounded-3xl bg-white/10 backdrop-blur-lg shadow-[0_0_30px_rgba(255,255,255,0.05)] border border-white/20 text-sm text-gray-200 max-w-2xl",children:[t.jsx("p",{children:e.analysis.short_interpretation}),t.jsx("div",{className:"absolute left-6 -bottom-3 w-4 h-4 rotate-45 bg-white/10 border-l border-b border-white/20 backdrop-blur-lg"})]})]}),((E=(I=e.analysis)==null?void 0:I.keywords)==null?void 0:E.length)>0&&t.jsxs("section",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"ðŸ·ï¸ Keywords"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:e.analysis.keywords.map(y=>t.jsx(te,{className:"bg-white/30 text-white backdrop-blur rounded-full text-xs px-3 py-1 hover:scale-105 transition-transform",children:y},y))})]}),t.jsxs("section",{children:[t.jsx("h2",{className:"text-xl font-semibold mb-1",children:"ðŸ“Š Overall Sentiment"}),t.jsx("div",{className:"relative w-full h-2 bg-white/20 rounded-full overflow-hidden mt-2",children:t.jsx(b.div,{className:`h-full ${e.analysis.sentiment.positive>e.analysis.sentiment.negative?"bg-green-400":"bg-red-400"}`,initial:{width:0},animate:{width:`${Math.max(e.analysis.sentiment.positive,e.analysis.sentiment.negative)}%`},transition:{duration:1,ease:"easeInOut"}})}),t.jsxs("p",{className:"text-xs text-gray-300 mt-1",children:["Positive: ",e.analysis.sentiment.positive,"% | Negative:"," ",e.analysis.sentiment.negative,"% | Neutral:"," ",e.analysis.sentiment.neutral,"%"]})]}),t.jsx(Te,{DPT:(_=e.analysis)==null?void 0:_.dream_personality_type}),t.jsx(Je,{vibe:e.analysis.vibe}),t.jsx(Ze,{quote:e.analysis.highlight}),t.jsxs("section",{className:"mt-8",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"ðŸŒŒ Deep Dive Into Your Dream"}),t.jsx(Re,{type:"multiple",className:"space-y-4",children:l.map((y,P)=>t.jsxs(d,{value:y.title,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:P*.1},className:"border border-white/10 rounded-2xl backdrop-blur bg-white/5 text-white",children:[t.jsx(Ee,{className:"p-4 text-left hover:bg-white/10 rounded-2xl transition-all",children:t.jsxs("span",{className:"text-xl flex items-center gap-2",children:[t.jsx(b.span,{whileHover:{rotate:10,scale:1.2},transition:{type:"spring",stiffness:300},children:y.icon})," ",y.title]})}),t.jsx(Pe,{className:"px-4 pb-4 text-sm text-gray-200",children:y.text})]},y.title))})]})]})]})]}),t.jsx(x.Suspense,{fallback:t.jsx(Me,{}),children:t.jsx(at,{isOpen:c,onClose:()=>u(!1),share_captions:e.analysis.share_captions,shareImage:e.analysis.share_image_url,dreamId:e._id})})]})})}export{xt as default};
